<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>shell | 一个小前端</title>
    <meta name="generator" content="VuePress 1.8.2">
    
    <meta name="description" content="">
    
    <link rel="preload" href="/note/assets/css/0.styles.ba1ec7e7.css" as="style"><link rel="preload" href="/note/assets/js/app.282b5080.js" as="script"><link rel="preload" href="/note/assets/js/2.49b3a06c.js" as="script"><link rel="preload" href="/note/assets/js/35.a13dea5d.js" as="script"><link rel="prefetch" href="/note/assets/js/10.c44698c7.js"><link rel="prefetch" href="/note/assets/js/11.7c2cf634.js"><link rel="prefetch" href="/note/assets/js/12.7e03aefb.js"><link rel="prefetch" href="/note/assets/js/13.3ba589de.js"><link rel="prefetch" href="/note/assets/js/14.63a81c42.js"><link rel="prefetch" href="/note/assets/js/15.5344619d.js"><link rel="prefetch" href="/note/assets/js/16.c19539d9.js"><link rel="prefetch" href="/note/assets/js/17.c98b8387.js"><link rel="prefetch" href="/note/assets/js/18.716079d4.js"><link rel="prefetch" href="/note/assets/js/19.90826612.js"><link rel="prefetch" href="/note/assets/js/20.7efc1e95.js"><link rel="prefetch" href="/note/assets/js/21.eeead675.js"><link rel="prefetch" href="/note/assets/js/22.6292b820.js"><link rel="prefetch" href="/note/assets/js/23.9e614bab.js"><link rel="prefetch" href="/note/assets/js/24.05705cbd.js"><link rel="prefetch" href="/note/assets/js/25.2de047c4.js"><link rel="prefetch" href="/note/assets/js/26.0eb12a63.js"><link rel="prefetch" href="/note/assets/js/27.7b20fbd7.js"><link rel="prefetch" href="/note/assets/js/28.9a2f984f.js"><link rel="prefetch" href="/note/assets/js/29.4b336076.js"><link rel="prefetch" href="/note/assets/js/3.1921c780.js"><link rel="prefetch" href="/note/assets/js/30.f5d821b0.js"><link rel="prefetch" href="/note/assets/js/31.cdd67046.js"><link rel="prefetch" href="/note/assets/js/32.a46b4ccf.js"><link rel="prefetch" href="/note/assets/js/33.628391bb.js"><link rel="prefetch" href="/note/assets/js/34.b0cb7d6b.js"><link rel="prefetch" href="/note/assets/js/36.8a1af3cc.js"><link rel="prefetch" href="/note/assets/js/37.2af4556e.js"><link rel="prefetch" href="/note/assets/js/38.c2cc6d68.js"><link rel="prefetch" href="/note/assets/js/39.60fe37ed.js"><link rel="prefetch" href="/note/assets/js/4.c7b80b55.js"><link rel="prefetch" href="/note/assets/js/40.da265297.js"><link rel="prefetch" href="/note/assets/js/41.42823c3a.js"><link rel="prefetch" href="/note/assets/js/5.ff3c2fbf.js"><link rel="prefetch" href="/note/assets/js/6.f4c8525e.js"><link rel="prefetch" href="/note/assets/js/7.204b43ad.js"><link rel="prefetch" href="/note/assets/js/8.5d093de5.js"><link rel="prefetch" href="/note/assets/js/9.f5aa8f73.js">
    <link rel="stylesheet" href="/note/assets/css/0.styles.ba1ec7e7.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/note/" class="home-link router-link-active"><!----> <span class="site-name">一个小前端</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/note/" class="nav-link">
  Home
</a></div><div class="nav-item"><a href="/note/best/" class="nav-link">
  Tx
</a></div><div class="nav-item"><a href="/note/Typescript/" class="nav-link">
  Typescript
</a></div><div class="nav-item"><a href="/note/vue/" class="nav-link">
  Vue
</a></div><div class="nav-item"><a href="/note/vue3/" class="nav-link">
  Vue3
</a></div><div class="nav-item"><a href="/note/react/" class="nav-link">
  React
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="other" class="dropdown-title"><span class="title">other</span> <span class="arrow down"></span></button> <button type="button" aria-label="other" class="mobile-dropdown-title"><span class="title">other</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/note/other/linux/" class="nav-link router-link-active">
  Linux
</a></li><li class="dropdown-item"><!----> <a href="/note/other/macos/" class="nav-link">
  MacOs
</a></li><li class="dropdown-item"><!----> <a href="/note/other/webpack/" class="nav-link">
  Webpack
</a></li><li class="dropdown-item"><!----> <a href="/note/other/components/" class="nav-link">
  组件开发
</a></li><li class="dropdown-item"><!----> <a href="/note/other/设计模式/" class="nav-link">
  设计模式
</a></li></ul></div></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/note/" class="nav-link">
  Home
</a></div><div class="nav-item"><a href="/note/best/" class="nav-link">
  Tx
</a></div><div class="nav-item"><a href="/note/Typescript/" class="nav-link">
  Typescript
</a></div><div class="nav-item"><a href="/note/vue/" class="nav-link">
  Vue
</a></div><div class="nav-item"><a href="/note/vue3/" class="nav-link">
  Vue3
</a></div><div class="nav-item"><a href="/note/react/" class="nav-link">
  React
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="other" class="dropdown-title"><span class="title">other</span> <span class="arrow down"></span></button> <button type="button" aria-label="other" class="mobile-dropdown-title"><span class="title">other</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/note/other/linux/" class="nav-link router-link-active">
  Linux
</a></li><li class="dropdown-item"><!----> <a href="/note/other/macos/" class="nav-link">
  MacOs
</a></li><li class="dropdown-item"><!----> <a href="/note/other/webpack/" class="nav-link">
  Webpack
</a></li><li class="dropdown-item"><!----> <a href="/note/other/components/" class="nav-link">
  组件开发
</a></li><li class="dropdown-item"><!----> <a href="/note/other/设计模式/" class="nav-link">
  设计模式
</a></li></ul></div></div> <!----></nav>  <ul class="sidebar-links"><li><a href="/note/other/linux/" aria-current="page" class="sidebar-link">Linux</a></li><li><a href="/note/other/linux/vi.html" class="sidebar-link">vi 编辑器</a></li><li><a href="/note/other/linux/auto.html" class="sidebar-link">文件权限</a></li><li><a href="/note/other/linux/shell.html" aria-current="page" class="active sidebar-link">shell</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/note/other/linux/shell.html#_1-shell-基础" class="sidebar-link">1. shell 基础</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/note/other/linux/shell.html#_1-1-echo" class="sidebar-link">1.1 echo</a></li><li class="sidebar-sub-header"><a href="/note/other/linux/shell.html#_1-2-编写执行-shell" class="sidebar-link">1.2 编写执行 shell</a></li><li class="sidebar-sub-header"><a href="/note/other/linux/shell.html#_1-3-别名" class="sidebar-link">1.3 别名</a></li><li class="sidebar-sub-header"><a href="/note/other/linux/shell.html#_1-4-命令的生效顺序" class="sidebar-link">1.4 命令的生效顺序</a></li><li class="sidebar-sub-header"><a href="/note/other/linux/shell.html#_1-5-命令快捷键" class="sidebar-link">1.5 命令快捷键</a></li><li class="sidebar-sub-header"><a href="/note/other/linux/shell.html#_1-6-历史命令" class="sidebar-link">1.6 历史命令</a></li><li class="sidebar-sub-header"><a href="/note/other/linux/shell.html#_1-7-调用" class="sidebar-link">1.7 调用</a></li><li class="sidebar-sub-header"><a href="/note/other/linux/shell.html#_1-8-输出重定向" class="sidebar-link">1.8 输出重定向</a></li><li class="sidebar-sub-header"><a href="/note/other/linux/shell.html#_1-8-1-标准输入输出" class="sidebar-link">1.8.1 标准输入输出</a></li><li class="sidebar-sub-header"><a href="/note/other/linux/shell.html#_1-8-2-输入重定向" class="sidebar-link">1.8.2 输入重定向</a></li><li class="sidebar-sub-header"><a href="/note/other/linux/shell.html#_1-9-管道符号" class="sidebar-link">1.9 管道符号</a></li><li class="sidebar-sub-header"><a href="/note/other/linux/shell.html#_1-9-2-管道符号" class="sidebar-link">1.9.2 管道符号</a></li><li class="sidebar-sub-header"><a href="/note/other/linux/shell.html#_1-9-3-通配符" class="sidebar-link">1.9.3 通配符</a></li><li class="sidebar-sub-header"><a href="/note/other/linux/shell.html#_1-9-4-其它符号" class="sidebar-link">1.9.4 其它符号</a></li></ul></li><li class="sidebar-sub-header"><a href="/note/other/linux/shell.html#_2-变量" class="sidebar-link">2. 变量</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/note/other/linux/shell.html#_2-1-什么是变量" class="sidebar-link">2.1 什么是变量</a></li><li class="sidebar-sub-header"><a href="/note/other/linux/shell.html#_2-2-变量的分类" class="sidebar-link">2.2 变量的分类</a></li><li class="sidebar-sub-header"><a href="/note/other/linux/shell.html#_2-3-用户自定义变量" class="sidebar-link">2.3 用户自定义变量</a></li><li class="sidebar-sub-header"><a href="/note/other/linux/shell.html#_2-3-1-定义变量" class="sidebar-link">2.3.1 定义变量</a></li><li class="sidebar-sub-header"><a href="/note/other/linux/shell.html#_2-3-2-输出变量值" class="sidebar-link">2.3.2 输出变量值</a></li><li class="sidebar-sub-header"><a href="/note/other/linux/shell.html#_2-3-3-值默认都是字符串" class="sidebar-link">2.3.3 值默认都是字符串</a></li><li class="sidebar-sub-header"><a href="/note/other/linux/shell.html#_2-3-4-在赋值的时候引用变量" class="sidebar-link">2.3.4 在赋值的时候引用变量</a></li><li class="sidebar-sub-header"><a href="/note/other/linux/shell.html#_2-3-5-set" class="sidebar-link">2.3.5 set</a></li><li class="sidebar-sub-header"><a href="/note/other/linux/shell.html#_2-3-6-unset" class="sidebar-link">2.3.6 unset</a></li><li class="sidebar-sub-header"><a href="/note/other/linux/shell.html#_2-4-环境变量" class="sidebar-link">2.4 环境变量</a></li><li class="sidebar-sub-header"><a href="/note/other/linux/shell.html#_2-4-1-自定义环境变量" class="sidebar-link">2.4.1 自定义环境变量</a></li><li class="sidebar-sub-header"><a href="/note/other/linux/shell.html#_2-4-2-env" class="sidebar-link">2.4.2 env</a></li><li class="sidebar-sub-header"><a href="/note/other/linux/shell.html#_2-4-3-常用环境变量" class="sidebar-link">2.4.3 常用环境变量</a></li><li class="sidebar-sub-header"><a href="/note/other/linux/shell.html#_2-4-4-path" class="sidebar-link">2.4.4 path</a></li><li class="sidebar-sub-header"><a href="/note/other/linux/shell.html#_2-4-5-语系环境变量" class="sidebar-link">2.4.5 语系环境变量</a></li><li class="sidebar-sub-header"><a href="/note/other/linux/shell.html#_2-4-6-中文支持" class="sidebar-link">2.4.6 中文支持</a></li><li class="sidebar-sub-header"><a href="/note/other/linux/shell.html#_2-5-位置参数变量" class="sidebar-link">2.5 位置参数变量</a></li><li class="sidebar-sub-header"><a href="/note/other/linux/shell.html#_2-6-预定义变量" class="sidebar-link">2.6 预定义变量</a></li><li class="sidebar-sub-header"><a href="/note/other/linux/shell.html#_2-7-read" class="sidebar-link">2.7 read</a></li></ul></li><li class="sidebar-sub-header"><a href="/note/other/linux/shell.html#_3-运算符" class="sidebar-link">3. 运算符</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/note/other/linux/shell.html#_3-1-1-declare-命令" class="sidebar-link">3.1.1 declare 命令</a></li><li class="sidebar-sub-header"><a href="/note/other/linux/shell.html#_3-1-2-数组" class="sidebar-link">3.1.2 数组</a></li><li class="sidebar-sub-header"><a href="/note/other/linux/shell.html#_3-1-3-声明环境变量" class="sidebar-link">3.1.3 声明环境变量</a></li><li class="sidebar-sub-header"><a href="/note/other/linux/shell.html#_3-1-4-只读属性" class="sidebar-link">3.1.4 只读属性</a></li><li class="sidebar-sub-header"><a href="/note/other/linux/shell.html#_3-1-5-查询变量属性" class="sidebar-link">3.1.5 查询变量属性</a></li><li class="sidebar-sub-header"><a href="/note/other/linux/shell.html#_3-2-数值运算的方法" class="sidebar-link">3.2 数值运算的方法</a></li><li class="sidebar-sub-header"><a href="/note/other/linux/shell.html#_3-2-1-expr-或-let" class="sidebar-link">3.2.1 expr 或 let</a></li><li class="sidebar-sub-header"><a href="/note/other/linux/shell.html#_3-2-2-优先级" class="sidebar-link">3.2.2 优先级</a></li></ul></li><li class="sidebar-sub-header"><a href="/note/other/linux/shell.html#_4-环境变量配置文件" class="sidebar-link">4. 环境变量配置文件</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/note/other/linux/shell.html#_4-1-source-命令" class="sidebar-link">4.1 source 命令</a></li><li class="sidebar-sub-header"><a href="/note/other/linux/shell.html#_4-2-环境变量配置文件简介" class="sidebar-link">4.2 环境变量配置文件简介</a></li><li class="sidebar-sub-header"><a href="/note/other/linux/shell.html#_4-3-环境变量配置文件的功能" class="sidebar-link">4.3 环境变量配置文件的功能</a></li><li class="sidebar-sub-header"><a href="/note/other/linux/shell.html#_4-3-1-etc-profile" class="sidebar-link">4.3.1 /etc/profile</a></li><li class="sidebar-sub-header"><a href="/note/other/linux/shell.html#_4-3-2-bash-profile" class="sidebar-link">4.3.2 ~/.bash_profile</a></li><li class="sidebar-sub-header"><a href="/note/other/linux/shell.html#_4-3-3-bashrc" class="sidebar-link">4.3.3 ~/.bashrc</a></li><li class="sidebar-sub-header"><a href="/note/other/linux/shell.html#_4-3-4-etc-bashrc" class="sidebar-link">4.3.4 /etc/bashrc</a></li><li class="sidebar-sub-header"><a href="/note/other/linux/shell.html#_4-3-5-其它配置文件" class="sidebar-link">4.3.5. 其它配置文件</a></li><li class="sidebar-sub-header"><a href="/note/other/linux/shell.html#_4-3-5-1-注销时生效的环境变量配置文件" class="sidebar-link">4.3.5.1 注销时生效的环境变量配置文件</a></li><li class="sidebar-sub-header"><a href="/note/other/linux/shell.html#_4-3-5-2-脚本历史" class="sidebar-link">4.3.5.2 脚本历史</a></li><li class="sidebar-sub-header"><a href="/note/other/linux/shell.html#_4-3-5-3-shell-登录信息" class="sidebar-link">4.3.5.3 Shell 登录信息</a></li><li class="sidebar-sub-header"><a href="/note/other/linux/shell.html#_4-1-概念" class="sidebar-link">4.1 概念</a></li><li class="sidebar-sub-header"><a href="/note/other/linux/shell.html#_4-2-通配符" class="sidebar-link">4.2 通配符</a></li><li class="sidebar-sub-header"><a href="/note/other/linux/shell.html#_4-3-正则表达式" class="sidebar-link">4.3 正则表达式</a></li><li class="sidebar-sub-header"><a href="/note/other/linux/shell.html#_4-4-元字符" class="sidebar-link">4.4 元字符</a></li><li class="sidebar-sub-header"><a href="/note/other/linux/shell.html#_4-5-cut" class="sidebar-link">4.5 cut</a></li><li class="sidebar-sub-header"><a href="/note/other/linux/shell.html#_4-6-printf" class="sidebar-link">4.6 printf</a></li><li class="sidebar-sub-header"><a href="/note/other/linux/shell.html#_4-6-1-df-h-显示当前的硬盘使用情况" class="sidebar-link">4.6.1 df -h 显示当前的硬盘使用情况</a></li></ul></li><li class="sidebar-sub-header"><a href="/note/other/linux/shell.html#_4-7-awk" class="sidebar-link">4.7 awk</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/note/other/linux/shell.html#_4-7-1-begin-end" class="sidebar-link">4.7.1 begin end</a></li><li class="sidebar-sub-header"><a href="/note/other/linux/shell.html#_4-7-2-fs" class="sidebar-link">4.7.2 FS</a></li><li class="sidebar-sub-header"><a href="/note/other/linux/shell.html#_4-7-3-声明变量" class="sidebar-link">4.7.3 声明变量</a></li><li class="sidebar-sub-header"><a href="/note/other/linux/shell.html#_4-7-4-多条件" class="sidebar-link">4.7.4 多条件</a></li><li class="sidebar-sub-header"><a href="/note/other/linux/shell.html#_4-7-5-nr" class="sidebar-link">4.7.5 NR</a></li><li class="sidebar-sub-header"><a href="/note/other/linux/shell.html#_4-7-6-ofs" class="sidebar-link">4.7.6 OFS</a></li></ul></li><li class="sidebar-sub-header"><a href="/note/other/linux/shell.html#_4-8-sed-命令" class="sidebar-link">4.8 sed 命令</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/note/other/linux/shell.html#_4-8-1-动作" class="sidebar-link">4.8.1 动作</a></li><li class="sidebar-sub-header"><a href="/note/other/linux/shell.html#_4-8-2-选项" class="sidebar-link">4.8.2 选项</a></li><li class="sidebar-sub-header"><a href="/note/other/linux/shell.html#_4-9-排序命令-sort" class="sidebar-link">4.9 排序命令 sort</a></li><li class="sidebar-sub-header"><a href="/note/other/linux/shell.html#_4-10-wc" class="sidebar-link">4.10 wc</a></li></ul></li><li class="sidebar-sub-header"><a href="/note/other/linux/shell.html#_5-流程控制" class="sidebar-link">5. 流程控制</a></li><li class="sidebar-sub-header"><a href="/note/other/linux/shell.html#_5-1-条件判断" class="sidebar-link">5.1 条件判断</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/note/other/linux/shell.html#_5-1-1-按照文件类型进行判断" class="sidebar-link">5.1.1 按照文件类型进行判断</a></li><li class="sidebar-sub-header"><a href="/note/other/linux/shell.html#_5-1-2-按照文件权限进行判断" class="sidebar-link">5.1.2 按照文件权限进行判断</a></li><li class="sidebar-sub-header"><a href="/note/other/linux/shell.html#_5-1-3-两个文件间的比较" class="sidebar-link">5.1.3 两个文件间的比较</a></li><li class="sidebar-sub-header"><a href="/note/other/linux/shell.html#_5-1-4-两个整数间的比较" class="sidebar-link">5.1.4 两个整数间的比较</a></li><li class="sidebar-sub-header"><a href="/note/other/linux/shell.html#_5-1-5-字符串的判断" class="sidebar-link">5.1.5 字符串的判断</a></li><li class="sidebar-sub-header"><a href="/note/other/linux/shell.html#_5-1-6-多重条件判断" class="sidebar-link">5.1.6 多重条件判断</a></li></ul></li><li class="sidebar-sub-header"><a href="/note/other/linux/shell.html#_5-2-单分支-if-语句" class="sidebar-link">5.2 单分支 if 语句</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/note/other/linux/shell.html#_5-2-1-语法" class="sidebar-link">5.2.1 语法</a></li><li class="sidebar-sub-header"><a href="/note/other/linux/shell.html#_5-2-2-判断当前用户是否是-root-用户" class="sidebar-link">5.2.2 判断当前用户是否是 root 用户</a></li></ul></li><li class="sidebar-sub-header"><a href="/note/other/linux/shell.html#_5-3-双分支-if-语句" class="sidebar-link">5.3 双分支 if 语句</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/note/other/linux/shell.html#_5-3-1-语法" class="sidebar-link">5.3.1 语法</a></li><li class="sidebar-sub-header"><a href="/note/other/linux/shell.html#_5-3-2-判断是否目录" class="sidebar-link">5.3.2 判断是否目录</a></li></ul></li><li class="sidebar-sub-header"><a href="/note/other/linux/shell.html#_5-4-多分支-if-语句" class="sidebar-link">5.4 多分支 if 语句</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/note/other/linux/shell.html#_5-4-1-语法" class="sidebar-link">5.4.1 语法</a></li></ul></li><li class="sidebar-sub-header"><a href="/note/other/linux/shell.html#_5-5-case-语句" class="sidebar-link">5.5 case 语句</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/note/other/linux/shell.html#_5-5-1-语法" class="sidebar-link">5.5.1 语法</a></li></ul></li><li class="sidebar-sub-header"><a href="/note/other/linux/shell.html#_5-6-for-循环" class="sidebar-link">5.6 for 循环</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/note/other/linux/shell.html#_5-6-1-语法" class="sidebar-link">5.6.1 语法</a></li><li class="sidebar-sub-header"><a href="/note/other/linux/shell.html#_5-6-2-语法" class="sidebar-link">5.6.2 语法</a></li></ul></li><li class="sidebar-sub-header"><a href="/note/other/linux/shell.html#_5-7-while-循环" class="sidebar-link">5.7 while 循环</a></li><li class="sidebar-sub-header"><a href="/note/other/linux/shell.html#_5-8-until-循环" class="sidebar-link">5.8 until 循环</a></li><li class="sidebar-sub-header"><a href="/note/other/linux/shell.html#_6-函数" class="sidebar-link">6. 函数</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/note/other/linux/shell.html#_6-1-简单函数" class="sidebar-link">6.1 简单函数</a></li></ul></li><li class="sidebar-sub-header"><a href="/note/other/linux/shell.html#_6-2-返回值" class="sidebar-link">6.2 返回值</a></li><li class="sidebar-sub-header"><a href="/note/other/linux/shell.html#_6-3-参数说明" class="sidebar-link">6.3 参数说明</a></li><li class="sidebar-sub-header"><a href="/note/other/linux/shell.html#_7-shell-实战" class="sidebar-link">7.shell 实战</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/note/other/linux/shell.html#_7-1-注意事项" class="sidebar-link">7.1 注意事项</a></li><li class="sidebar-sub-header"><a href="/note/other/linux/shell.html#_7-2-检查主机存活状态" class="sidebar-link">7.2 检查主机存活状态</a></li></ul></li></ul></li><li><a href="/note/other/linux/linux-install.html" class="sidebar-link">linux-install</a></li><li><a href="/note/other/linux/docker.html" class="sidebar-link">docker</a></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="shell"><a href="#shell" class="header-anchor">#</a> shell</h1> <h2 id="_1-shell-基础"><a href="#_1-shell-基础" class="header-anchor">#</a> 1. shell 基础</h2> <ul><li>shell 是一个命令行解释器，它为用户提供了一个向 Linux 内核发送请求以便运行程序的界面系统级程序</li> <li>用户可以用 Shell 来启动、挂起、停止或者编写一些程序</li> <li>Shell 还是一个功能相当强大的编程语言，易编写，易调试，灵活性较强。</li> <li>Shell 是解释执行的脚本语言，在 Shell 中可以直接调用 Linux 系统命令。</li></ul> <h3 id="_1-1-echo"><a href="#_1-1-echo" class="header-anchor">#</a> 1.1 echo</h3> <ul><li>输出命令</li> <li>-e：激活转义字符</li></ul> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code><span class="token builtin class-name">echo</span> hello
<span class="token builtin class-name">echo</span> -e <span class="token string">&quot;a<span class="token entity" title="\t">\t</span>b&quot;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h3 id="_1-2-编写执行-shell"><a href="#_1-2-编写执行-shell" class="header-anchor">#</a> 1.2 编写执行 shell</h3> <p>hello.sh</p> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code><span class="token shebang important">#!/bin/bash</span>
<span class="token builtin class-name">echo</span> hello
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">//通过 Bash 调用执行脚本</span>
sh hello<span class="token punctuation">.</span>sh
<span class="token comment">//赋予执行权限，直接运行</span>
chmod <span class="token number">755</span> hello<span class="token punctuation">.</span>sh
chmod u<span class="token operator">+</span>x hello<span class="token punctuation">.</span>sh
<span class="token punctuation">.</span><span class="token operator">/</span>hello<span class="token punctuation">.</span>sh
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h3 id="_1-3-别名"><a href="#_1-3-别名" class="header-anchor">#</a> 1.3 别名</h3> <ul><li>命令别名就是小名</li> <li>临时生效 <code>alias cp=&quot;cp -i&quot;</code></li> <li>写入环境变量配置文件 <code>vi ~/.bashrc</code></li> <li>source ~/.bashrc</li> <li>删除别名 <code>unalias 别名</code></li></ul> <h3 id="_1-4-命令的生效顺序"><a href="#_1-4-命令的生效顺序" class="header-anchor">#</a> 1.4 命令的生效顺序</h3> <ul><li>绝对路径或者相对路径</li> <li>别名</li> <li>bash 内部命令</li> <li>按照 <code>$PATH</code> 环境变量定义的目录查找顺序找到的第一个命令</li></ul> <h3 id="_1-5-命令快捷键"><a href="#_1-5-命令快捷键" class="header-anchor">#</a> 1.5 命令快捷键</h3> <table><thead><tr><th>命令</th> <th>含义</th></tr></thead> <tbody><tr><td>ctrl+c</td> <td>强制终止当前命令</td></tr> <tr><td>ctrl+l</td> <td>清屏</td></tr> <tr><td>ctrl+a</td> <td>光标移动到命令行首</td></tr> <tr><td>ctrl+e</td> <td>光标移动到命令行尾</td></tr> <tr><td>ctrl+u</td> <td>从光标所在的位置删除到行首</td></tr></tbody></table> <h3 id="_1-6-历史命令"><a href="#_1-6-历史命令" class="header-anchor">#</a> 1.6 历史命令</h3> <ul><li>history [选项] [历史命令保存文件]</li> <li>选项
<ul><li>-c 清空历史命令</li> <li>-w 把缓存中的历史命令写入历史命令保存文件 ~/.bash_history</li></ul></li> <li>默认保存 1000 条 /etc/profile <code>HISSIZE=10000</code></li></ul> <h3 id="_1-7-调用"><a href="#_1-7-调用" class="header-anchor">#</a> 1.7 调用</h3> <ul><li>使用上下箭头调用以前的历史命令</li> <li>使用 <code>!n</code> 重复执行第 n 条历史命令</li> <li>使用 <code>!!</code> 重复执行上一条命令</li> <li>使用 <code>!字符</code> 重复执行最后一条以该字符串开头的命令</li></ul> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code><span class="token function">history</span> -c
<span class="token number">1</span> <span class="token builtin class-name">echo</span> <span class="token number">1</span>
<span class="token number">2</span> <span class="token builtin class-name">echo</span> <span class="token number">2</span>
<span class="token number">3</span> <span class="token builtin class-name">echo</span> <span class="token number">3</span>
<span class="token operator">!</span><span class="token number">2</span>
<span class="token operator">!</span><span class="token operator">!</span>
<span class="token operator">!</span>echo
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><h3 id="_1-8-输出重定向"><a href="#_1-8-输出重定向" class="header-anchor">#</a> 1.8 输出重定向</h3> <h3 id="_1-8-1-标准输入输出"><a href="#_1-8-1-标准输入输出" class="header-anchor">#</a> 1.8.1 标准输入输出</h3> <table><thead><tr><th>设备</th> <th>设备文件名</th> <th>文件描述符</th> <th>类型</th></tr></thead> <tbody><tr><td>键盘</td> <td>/dev/stdin</td> <td>0</td> <td>标准输入</td></tr> <tr><td>显示器</td> <td>/dev/stdout</td> <td>1</td> <td>标准输出</td></tr> <tr><td>显示器</td> <td>/dev/stderr</td> <td>2</td> <td>标准错误输出</td></tr></tbody></table> <table><thead><tr><th>类型</th> <th>符号</th> <th>作用</th></tr></thead> <tbody><tr><td>标准输出重定向</td> <td>命令 &gt; 文件</td> <td>以覆盖的方式，把命令的正确输出输出到指定的文件或设备当中</td></tr> <tr><td>标准输出重定向</td> <td>命令 &gt;&gt; 文件</td> <td>以追加的方式，把命令的正确输出输出到指定的文件或设备当中</td></tr> <tr><td>错误输出重定向</td> <td>命令&gt;文件</td> <td>以覆盖的方式，把命令的错误输出输出到指定的文件或设备当中</td></tr> <tr><td>错误输出重定向</td> <td>命令&gt;&gt;文件</td> <td>以追加的方式，把命令的错误输出输出到指定的文件或设备当中</td></tr> <tr><td>正确输出和错误输出同时保存</td> <td>命令&gt;文件 2&gt;&amp;1</td> <td>以覆盖的方式，把正确输出和错误输出都保存到同一个文件当中</td></tr> <tr><td>正确输出和错误输出同时保存</td> <td>命令&gt;文件 2&gt;&gt;&amp;1</td> <td>以追加的方式，把正确输出和错误输出都保存到同一个文件当中</td></tr> <tr><td>正确输出和错误输出同时保存</td> <td>命令&amp;&gt;文件</td> <td>以覆盖的方式，把正确输出和错误输出都保存到同一个文件当中</td></tr> <tr><td>正确输出和错误输出同时保存</td> <td>命令&amp;&gt;&gt;文件</td> <td>以追加的方式，把正确输出和错误输出都保存到同一个文件当中</td></tr> <tr><td>正确输出和错误输出同时保存</td> <td>命令&gt;&gt;文件 1 2&gt;文件 2</td> <td>以覆盖的方式，正确的输出追加到文件 1 中，把错误输出追加到文件 2 中</td></tr></tbody></table> <h3 id="_1-8-2-输入重定向"><a href="#_1-8-2-输入重定向" class="header-anchor">#</a> 1.8.2 输入重定向</h3> <ul><li><code>wc</code> 命令的功能为统计指定文件中的行数、字数、字节数, 并将统计结果显示输出</li> <li>命令 <code>&lt;</code> 文件把文件做为命令的输入</li></ul> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code><span class="token function">wc</span> <span class="token operator">&lt;</span> a.txt
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h3 id="_1-9-管道符号"><a href="#_1-9-管道符号" class="header-anchor">#</a> 1.9 管道符号</h3> <h4 id="_1-9-1-多命令顺序执行"><a href="#_1-9-1-多命令顺序执行" class="header-anchor">#</a> 1.9.1 多命令顺序执行</h4> <table><thead><tr><th>多命令执行符</th> <th>格式</th> <th>作用</th> <th>案例</th></tr></thead> <tbody><tr><td>;</td> <td>命令 1;命令 2</td> <td>多个命令执行，命令之间没有任何逻辑联系</td> <td>echo 1;echo 2;</td></tr> <tr><td>&amp;&amp;</td> <td>命令 1&amp;&amp;命令 2</td> <td>逻辑与 当命令 1 正确执行，则命令 2 才会执行 当命令 1 执行不正确，则命令 2 不会执行</td> <td>echo 1&amp;&amp;echo 2;</td></tr> <tr><td>\</td> <td>命令 1\ 命令 2</td> <td>逻辑或 当命令 1 执行不正确，则命令 2 才会执行 当命令 1 正确执行，则命令 2 不会执行</td> <td>echo 1\echo 2;</td></tr></tbody></table> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code><span class="token builtin class-name">echo</span> <span class="token number">1</span><span class="token punctuation">;</span><span class="token builtin class-name">echo</span> <span class="token number">2</span><span class="token punctuation">;</span>
<span class="token builtin class-name">echo</span> <span class="token number">1</span><span class="token operator">&amp;&amp;</span><span class="token builtin class-name">echo</span> <span class="token number">2</span><span class="token punctuation">;</span>
<span class="token builtin class-name">echo</span> <span class="token number">1</span><span class="token operator">||</span><span class="token builtin class-name">echo</span> <span class="token number">2</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h3 id="_1-9-2-管道符号"><a href="#_1-9-2-管道符号" class="header-anchor">#</a> 1.9.2 管道符号</h3> <ul><li>命令 1 的正确输出会作为命令 2 的操作对象</li> <li>命令 1|命令 2</li></ul> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code><span class="token function">ls</span> /etc/ <span class="token operator">|</span> <span class="token function">more</span>
<span class="token function">netstat</span> -an <span class="token operator">|</span> <span class="token function">grep</span> ESTABLISHED <span class="token operator">|</span> <span class="token function">wc</span> -l
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h3 id="_1-9-3-通配符"><a href="#_1-9-3-通配符" class="header-anchor">#</a> 1.9.3 通配符</h3> <ul><li>匹配文件名和目录名
<table><thead><tr><th>通配符</th> <th>作用</th></tr></thead> <tbody><tr><td>?</td> <td>匹配一个任意字符</td></tr> <tr><td>-</td> <td>匹配 0 个或任意字符，也就是可以匹配任意内容</td></tr> <tr><td>[]</td> <td>匹配中括号中任意一个字符</td></tr> <tr><td>[-]</td> <td>匹配中括号中任意一个字符,-代表范围</td></tr> <tr><td>[^]</td> <td>匹配不是中括号中的一个字符</td></tr></tbody></table></li></ul> <h3 id="_1-9-4-其它符号"><a href="#_1-9-4-其它符号" class="header-anchor">#</a> 1.9.4 其它符号</h3> <table><thead><tr><th>符号</th> <th>作用</th></tr></thead> <tbody><tr><td>''</td> <td>单引号。在单引号中所有的特殊符号，如$和`都没有特殊含义</td></tr> <tr><td>&quot;&quot;</td> <td>双引号，在双引号里特殊符号都没有特殊含义，但是 $ ` \ 例外，拥有调用变量值，引用命令和转义的含义</td></tr> <tr><td></td> <td>反引号，扩起来的是系统命令</td></tr> <tr><td>$()</td> <td>和反引号一样</td></tr> <tr><td>#</td> <td>在 shell 脚本中，#开头的行代表注释</td></tr> <tr><td>$</td> <td>用于调用变量的值</td></tr> <tr><td>\</td> <td>转义符号</td></tr></tbody></table> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code><span class="token builtin class-name">echo</span> <span class="token string">'$PATH'</span>
<span class="token builtin class-name">echo</span> <span class="token string">&quot;<span class="token environment constant">$PATH</span>&quot;</span>
<span class="token builtin class-name">echo</span> <span class="token variable"><span class="token variable">`</span><span class="token function">ls</span><span class="token variable">`</span></span>
<span class="token builtin class-name">echo</span> <span class="token variable"><span class="token variable">$(</span><span class="token function">ls</span><span class="token variable">)</span></span>
<span class="token builtin class-name">echo</span> -e <span class="token string">&quot;a<span class="token entity" title="\t">\t</span>b&quot;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h2 id="_2-变量"><a href="#_2-变量" class="header-anchor">#</a> 2. 变量</h2> <h3 id="_2-1-什么是变量"><a href="#_2-1-什么是变量" class="header-anchor">#</a> 2.1 什么是变量</h3> <ul><li>可以变化的量</li> <li>变量必须以字母或下划线开头，名字中间只能由字母，数字和下划线组成</li> <li>变量名的长度不得超过 255 个字符</li> <li>变量名在有效范围内必须唯一</li> <li>变量默认类型都是字符串</li></ul> <h3 id="_2-2-变量的分类"><a href="#_2-2-变量的分类" class="header-anchor">#</a> 2.2 变量的分类</h3> <ul><li>字符串</li> <li>整型</li> <li>浮点型</li> <li>日期型</li></ul> <h3 id="_2-3-用户自定义变量"><a href="#_2-3-用户自定义变量" class="header-anchor">#</a> 2.3 用户自定义变量</h3> <ul><li>这些变量的值是自己定义的</li> <li>变量名不能为数字开头</li> <li>等号左右两边不能有空格</li></ul> <h3 id="_2-3-1-定义变量"><a href="#_2-3-1-定义变量" class="header-anchor">#</a> 2.3.1 定义变量</h3> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code><span class="token assign-left variable">name</span><span class="token operator">=</span><span class="token string">&quot;zhufeng&quot;</span>
<span class="token assign-left variable">age</span><span class="token operator">=</span><span class="token number">10</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h3 id="_2-3-2-输出变量值"><a href="#_2-3-2-输出变量值" class="header-anchor">#</a> 2.3.2 输出变量值</h3> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code><span class="token builtin class-name">echo</span> $变量名
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h3 id="_2-3-3-值默认都是字符串"><a href="#_2-3-3-值默认都是字符串" class="header-anchor">#</a> 2.3.3 值默认都是字符串</h3> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code>$ <span class="token assign-left variable">x</span><span class="token operator">=</span><span class="token number">1</span>
$ <span class="token assign-left variable">y</span><span class="token operator">=</span><span class="token number">2</span>
$ <span class="token assign-left variable">z</span><span class="token operator">=</span><span class="token number">3</span>
$ <span class="token assign-left variable">k</span><span class="token operator">=</span><span class="token variable">$x</span>+<span class="token variable">$y</span>+<span class="token variable">$z</span>
$ <span class="token builtin class-name">echo</span> <span class="token variable">$k</span>
<span class="token number">1</span>+2+3
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h3 id="_2-3-4-在赋值的时候引用变量"><a href="#_2-3-4-在赋值的时候引用变量" class="header-anchor">#</a> 2.3.4 在赋值的时候引用变量</h3> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code><span class="token assign-left variable">m</span><span class="token operator">=</span><span class="token string">&quot;<span class="token variable">$x</span>&quot;</span><span class="token number">2</span>
<span class="token assign-left variable">n</span><span class="token operator">=</span><span class="token variable">${x}</span><span class="token number">2</span>
<span class="token builtin class-name">echo</span> <span class="token variable">$m</span> <span class="token variable">$n</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h3 id="_2-3-5-set"><a href="#_2-3-5-set" class="header-anchor">#</a> 2.3.5 set</h3> <p>查询系统中默认所有已经生效的变量，包括系统变量,也包括自定义变量</p> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code><span class="token builtin class-name">set</span> <span class="token operator">|</span> <span class="token function">grep</span> zhufeng
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h3 id="_2-3-6-unset"><a href="#_2-3-6-unset" class="header-anchor">#</a> 2.3.6 unset</h3> <p>删除变量</p> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code><span class="token builtin class-name">unset</span> a
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h3 id="_2-4-环境变量"><a href="#_2-4-环境变量" class="header-anchor">#</a> 2.4 环境变量</h3> <ul><li>环境变量是全局变量，而自定义变量是局部变量</li> <li>自定义变量会在当前的 shell 中生效，而环境变量会在当前 shell 以及其子 shell 中生效</li> <li>这种变量主要保存的是和系统操作环境相关的数据</li> <li>变量可以自定义，但是对系统生效的环境变量名和变量作用是固定的</li></ul> <h3 id="_2-4-1-自定义环境变量"><a href="#_2-4-1-自定义环境变量" class="header-anchor">#</a> 2.4.1 自定义环境变量</h3> <p>export 变量名=变量值</p> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code><span class="token builtin class-name">export</span> <span class="token assign-left variable">envName</span><span class="token operator">=</span>prod
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h3 id="_2-4-2-env"><a href="#_2-4-2-env" class="header-anchor">#</a> 2.4.2 env</h3> <p>仅仅用来查看环境变量，而不看到本地变量</p> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code><span class="token function">env</span> <span class="token operator">|</span> <span class="token function">grep</span> envName
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h3 id="_2-4-3-常用环境变量"><a href="#_2-4-3-常用环境变量" class="header-anchor">#</a> 2.4.3 常用环境变量</h3> <table><thead><tr><th>变量名</th> <th>含义</th> <th>示例</th></tr></thead> <tbody><tr><td>HOSTNAME</td> <td>主机名</td> <td>HOSTNAME=localhost</td></tr> <tr><td>SHELL</td> <td>当前的</td> <td>shell SHELL=/bin/bash</td></tr> <tr><td>HISTSIZE</td> <td>历史命令条数</td> <td>HISTSIZE=1000</td></tr> <tr><td>SSH_CLIENT</td> <td>当前操作环境如果是用 SSH 连接的话，这里会记录客户端 IP</td> <td>SSH_CLIENT=192.168.1.100 57596 22</td></tr> <tr><td>USER</td> <td>当前登录的用户</td> <td>USER=root</td></tr></tbody></table> <p>echo $HOSTNAME
echo $SHELL
echo $HISTSIZE
echo $SSH_CLIENT
echo $USER</p> <h3 id="_2-4-4-path"><a href="#_2-4-4-path" class="header-anchor">#</a> 2.4.4 path</h3> <p>系统搜索路径</p> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code><span class="token comment"># echo $PATH</span>
/usr/lib/qt-3.3/bin:/usr/local/sbin:/usr/local/bin:/sbin:/bin:/usr/sbin:/usr/bin:/root/bin
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>如果想把一个自定义的脚本直接可以执行，或者把这个文件拷贝到目标目录下，或者把脚本所在目录添加到环境变量中的 PATH 路径中</p> <p>/root/shells/hello.sh</p> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code><span class="token shebang important">#!/bin/bash</span>
<span class="token builtin class-name">echo</span> hello
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><div class="language-sh line-numbers-mode"><pre class="language-sh"><code><span class="token builtin class-name">export</span> <span class="token assign-left variable"><span class="token environment constant">PATH</span></span><span class="token operator">=</span><span class="token string">&quot;<span class="token environment constant">$PATH</span>&quot;</span>:/root/shells
hello.sh
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h3 id="_2-4-5-语系环境变量"><a href="#_2-4-5-语系环境变量" class="header-anchor">#</a> 2.4.5 语系环境变量</h3> <ul><li>查询当前系统语系</li> <li>在 Linux 中通过 <code>locale</code> 来设置程序运行的不同语言环境，locale 由 ANSI C 提供支持。locale 的命名规则为&lt;语言&gt;_&lt;地区&gt;.&lt;字符集编码&gt;，如 zh_CN.UTF-8，zh 代表中文，CN 代表大陆地区，UTF-8 表示字符集。</li> <li>LANG: 定义系统主语系的变量</li></ul> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code>locale
<span class="token assign-left variable"><span class="token environment constant">LANG</span></span><span class="token operator">=</span>zh_CN.UTF-8

<span class="token builtin class-name">echo</span> <span class="token environment constant">$LANG</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h3 id="_2-4-6-中文支持"><a href="#_2-4-6-中文支持" class="header-anchor">#</a> 2.4.6 中文支持</h3> <ul><li>图形界面可以支持中文</li> <li>第三方工具比如 xshell 语系设置正确可以支持中文</li> <li>虚拟机中的纯字符界面不支持中文</li></ul> <h3 id="_2-5-位置参数变量"><a href="#_2-5-位置参数变量" class="header-anchor">#</a> 2.5 位置参数变量</h3> <p>这种变量主要是用来向脚本当中传递参数或数据的,变量名不能自定义,变量作用是固定的</p> <table><thead><tr><th>位置参数变量</th> <th>作用</th></tr></thead> <tbody><tr><td>$n</td> <td>n 为数字，$0代表命令本身，$1-$9代表第1到第9个参数，10以上的参数需要用大括号包含,如${10}</td></tr> <tr><td>$*</td> <td>这个变量代表命令中所有的参数，$*把所有的变看数看成一个整体</td></tr> <tr><td>$@</td> <td>这个变量也代表命令行中所有的参数，不过$@把每个参数进行区分</td></tr> <tr><td>$#</td> <td>这个变量代表命令行中所有参数的个数</td></tr></tbody></table> <p>sum.sh</p> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code><span class="token shebang important">#!/bin/bash</span>
<span class="token assign-left variable">num1</span><span class="token operator">=</span><span class="token variable">$1</span>
<span class="token assign-left variable">num2</span><span class="token operator">=</span><span class="token variable">$2</span>
<span class="token assign-left variable">sum</span><span class="token operator">=</span><span class="token variable"><span class="token variable">$((</span>num1<span class="token operator">+</span>num2<span class="token variable">))</span></span>
<span class="token builtin class-name">echo</span> <span class="token variable">$sum</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><div class="language-sh line-numbers-mode"><pre class="language-sh"><code><span class="token function">sh</span> sum.sh <span class="token number">3</span> <span class="token number">4</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>vi for.sh</p> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code><span class="token shebang important">#!/bin/bash</span>
<span class="token keyword">for</span> <span class="token for-or-select variable">i</span> <span class="token keyword">in</span> <span class="token string">&quot;<span class="token variable">$@</span>&quot;</span>
 <span class="token keyword">do</span>
   <span class="token builtin class-name">echo</span> <span class="token string">&quot;i=<span class="token variable">$i</span>&quot;</span>
  <span class="token keyword">done</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><div class="language-sh line-numbers-mode"><pre class="language-sh"><code><span class="token function">sh</span> for.sh <span class="token number">1</span> <span class="token number">2</span> <span class="token number">3</span>
<span class="token assign-left variable">i</span><span class="token operator">=</span><span class="token number">1</span>
<span class="token assign-left variable">i</span><span class="token operator">=</span><span class="token number">2</span>
<span class="token assign-left variable">i</span><span class="token operator">=</span><span class="token number">3</span>
<span class="token function">vi</span> for2.sh
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><div class="language-sh line-numbers-mode"><pre class="language-sh"><code><span class="token shebang important">#!/bin/bash</span>
<span class="token keyword">for</span> <span class="token for-or-select variable">i</span> <span class="token keyword">in</span> <span class="token string">&quot;<span class="token variable">$#</span>&quot;</span>
 <span class="token keyword">do</span>
   <span class="token builtin class-name">echo</span> <span class="token string">&quot;i=<span class="token variable">$i</span>&quot;</span>
  <span class="token keyword">done</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><div class="language-sh line-numbers-mode"><pre class="language-sh"><code><span class="token function">sh</span> for2.sh <span class="token number">1</span> <span class="token number">2</span> <span class="token number">3</span>
<span class="token assign-left variable">i</span><span class="token operator">=</span><span class="token number">1</span> <span class="token number">2</span> <span class="token number">3</span>
<span class="token function">vi</span> for3.sh
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><div class="language-sh line-numbers-mode"><pre class="language-sh"><code><span class="token shebang important">#!/bin/bash</span>
<span class="token builtin class-name">echo</span> <span class="token string">&quot;<span class="token variable">$#</span>&quot;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><div class="language-sh line-numbers-mode"><pre class="language-sh"><code><span class="token function">sh</span> for3.sh <span class="token number">1</span> <span class="token number">2</span> <span class="token number">3</span>
<span class="token number">3</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h3 id="_2-6-预定义变量"><a href="#_2-6-预定义变量" class="header-anchor">#</a> 2.6 预定义变量</h3> <ul><li>是脚本中已经定义好的变量，变量名不能自定义，变量作用也是固定的</li></ul> <table><thead><tr><th>位置参数变量</th> <th>作用</th></tr></thead> <tbody><tr><td>$?</td> <td>最后一次执行的命令的返回状态。0 表示正确执行，非 0 表示不正确执行</td></tr> <tr><td>$$</td> <td>当前进程的进程号(PID)</td></tr></tbody></table> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code><span class="token builtin class-name">echo</span> <span class="token variable">$?</span>
<span class="token builtin class-name">echo</span>
<span class="token variable">$$</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h3 id="_2-7-read"><a href="#_2-7-read" class="header-anchor">#</a> 2.7 read</h3> <p>read [选项] [变量名]</p> <table><thead><tr><th>选项</th> <th>含义</th></tr></thead> <tbody><tr><td>-p</td> <td>提示信息，在等待 read 输入时，输出提示信息</td></tr> <tr><td>-t</td> <td>秒数: read 命令会一直等待用户输入，使用此选项可以指定等待时间</td></tr> <tr><td>-n</td> <td>字符数，read 命令只接受指定的字符数，就会执行</td></tr> <tr><td>-s</td> <td>隐藏输入的数据，适用于机密信息的输入</td></tr></tbody></table> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code><span class="token shebang important">#!/bin/bash</span>
<span class="token builtin class-name">read</span> -p <span class="token string">'please input your name:'</span> -t <span class="token number">5</span> name
<span class="token builtin class-name">echo</span> -e <span class="token string">&quot;<span class="token entity" title="\n">\n</span>&quot;</span>
<span class="token builtin class-name">read</span> -p <span class="token string">'please input you gender[m/f]:'</span> -n <span class="token number">1</span> gender
<span class="token builtin class-name">echo</span> -e <span class="token string">&quot;<span class="token entity" title="\n">\n</span>&quot;</span>
<span class="token builtin class-name">read</span> -p <span class="token string">'please input your password:'</span> -s password
<span class="token builtin class-name">echo</span> -e <span class="token string">&quot;<span class="token entity" title="\n">\n</span>&quot;</span>
<span class="token builtin class-name">echo</span> <span class="token variable">$name</span>,<span class="token variable">$gender</span>,<span class="token variable">$password</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><div class="language-sh line-numbers-mode"><pre class="language-sh"><code><span class="token function">sh</span> read.sh
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h2 id="_3-运算符"><a href="#_3-运算符" class="header-anchor">#</a> 3. 运算符</h2> <p>弱类型并且默认是字符串类型</p> <h3 id="_3-1-1-declare-命令"><a href="#_3-1-1-declare-命令" class="header-anchor">#</a> 3.1.1 declare 命令</h3> <ul><li>用来声明变量类型</li> <li>declare [+/-] [选项] 变量名</li></ul> <table><thead><tr><th>选项</th> <th>含义</th></tr></thead> <tbody><tr><td>-</td> <td>给变量设定类型属性</td></tr> <tr><td>*</td> <td>取消变量的类型属性</td></tr> <tr><td>-a</td> <td>将变量声明为数组类型</td></tr> <tr><td>-i</td> <td>将变量声明为整数型</td></tr> <tr><td>-x</td> <td>将变量声明为环境变量</td></tr> <tr><td>-r</td> <td>将变量声明为只读变量</td></tr> <tr><td>-p</td> <td>显示指定变量的被声明的类型</td></tr></tbody></table> <div class="language-js line-numbers-mode"><pre class="language-js"><code>a<span class="token operator">=</span><span class="token number">1</span>
b<span class="token operator">=</span><span class="token number">2</span>
c<span class="token operator">=</span>$a<span class="token operator">+</span>$b
echo $c
<span class="token number">1</span><span class="token operator">+</span><span class="token number">2</span>
declare <span class="token operator">-</span>i c<span class="token operator">=</span>$a<span class="token operator">+</span>$b <span class="token comment">//声明成整型</span>
echo $c
<span class="token number">3</span>
declare <span class="token operator">+</span>i c <span class="token comment">//取消变量的类型属性</span>
c<span class="token operator">=</span>$a<span class="token operator">+</span>$b
echo $c
<span class="token number">1</span><span class="token operator">+</span><span class="token number">2</span>
declare <span class="token operator">-</span>i c<span class="token operator">=</span><span class="token string">&quot;3&quot;</span> <span class="token comment">//给变量设定类型属性</span>
declare <span class="token operator">-</span>p c <span class="token comment">//显示指定变量的被声明的类型</span>
<span class="token comment">//declare -i c=&quot;3&quot;</span>

<span class="token comment">//声明环境变量</span>
declare <span class="token operator">-</span>x kk<span class="token operator">=</span><span class="token number">1</span>
set <span class="token operator">|</span> grep kk <span class="token comment">//查看所有变量</span>
env <span class="token operator">|</span> grep kk <span class="token comment">//只查看系统变量</span>

declare <span class="token operator">-</span>r x <span class="token comment">//只读</span>
x<span class="token operator">=</span><span class="token number">2</span> <span class="token comment">//bash: x: readonly variable</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br></div></div><h3 id="_3-1-2-数组"><a href="#_3-1-2-数组" class="header-anchor">#</a> 3.1.2 数组</h3> <p>//声明为数组类型
declare -a names;</p> <p>names[0]=zhangsan
names[1]=lisi</p> <p>//默认只打印第一个元素
echo ${names}
zhangsan
//打印第 2 个元素
echo ${names[1]}
lisi
//打印全部
echo ${names[*]}
zhangsan lisi</p> <h3 id="_3-1-3-声明环境变量"><a href="#_3-1-3-声明环境变量" class="header-anchor">#</a> 3.1.3 声明环境变量</h3> <p>export 最终执行的是 declare -x 命令
declare -p 可以查看所有的类型
export NAME=zhufeng
declare -x NAME=zhufeng</p> <h3 id="_3-1-4-只读属性"><a href="#_3-1-4-只读属性" class="header-anchor">#</a> 3.1.4 只读属性</h3> <p>declare -r gender=m
gender=f
-bash: gender: readonly variable</p> <h3 id="_3-1-5-查询变量属性"><a href="#_3-1-5-查询变量属性" class="header-anchor">#</a> 3.1.5 查询变量属性</h3> <p>declare -p 查询所有变量的属性
declare -p 变量名 查询指定变量的属性</p> <h3 id="_3-2-数值运算的方法"><a href="#_3-2-数值运算的方法" class="header-anchor">#</a> 3.2 数值运算的方法</h3> <p>只要用 declare 声明变量的时候指定类型就可以进行数值运算</p> <h3 id="_3-2-1-expr-或-let"><a href="#_3-2-1-expr-或-let" class="header-anchor">#</a> 3.2.1 expr 或 let</h3> <p>号左右两侧必须有空格,否则还是整块输出
num1=2
num2=3
sum=$(expr $num1 + $num2)
echo $sum
5
sum2=$(($num1+$num2))
echo $sum2
5
sum3=$[$num1+$num2]
echo $sum3
5</p> <p>d=$(date)
echo $d</p> <h3 id="_3-2-2-优先级"><a href="#_3-2-2-优先级" class="header-anchor">#</a> 3.2.2 优先级</h3> <p>priority</p> <p>result=$(((1+2)*4/2))
echo $result
6</p> <h2 id="_4-环境变量配置文件"><a href="#_4-环境变量配置文件" class="header-anchor">#</a> 4. 环境变量配置文件</h2> <h3 id="_4-1-source-命令"><a href="#_4-1-source-命令" class="header-anchor">#</a> 4.1 source 命令</h3> <p>修改完配置文件后，必须注销重新登录才能生效，使用 source 命令可以不用重新登录
source 配置文件
. 配置文件</p> <h3 id="_4-2-环境变量配置文件简介"><a href="#_4-2-环境变量配置文件简介" class="header-anchor">#</a> 4.2 环境变量配置文件简介</h3> <p>PATH、HISTSIZE、PS1、HOSTNAME 等环境变量写入对应的环境变量配置文件
环境变量配置文件中主要是定义地系统操作环境生效的系统默认环境变量，如 PATH 等此文件登录时起作用的环境变量
路径 说明
/etc/profile
/etc/bashrc
~/.bash_profile 只会对当前用户生效
~/.bashrc 只会对当前用户生效
f49353175c1062b807c03b03bd9b5817</p> <h3 id="_4-3-环境变量配置文件的功能"><a href="#_4-3-环境变量配置文件的功能" class="header-anchor">#</a> 4.3 环境变量配置文件的功能</h3> <h3 id="_4-3-1-etc-profile"><a href="#_4-3-1-etc-profile" class="header-anchor">#</a> 4.3.1 /etc/profile</h3> <p>在这里修改系统变量
cat /etc/profile | grep USER
变量名 含义
USER 用户名
LOGNAME 登录名
MAIL 邮箱地址
PATH 查找路径
HOSTNAME 主机名
umask 权限掩码
/etc/profile.d/星.sh</p> <h3 id="_4-3-2-bash-profile"><a href="#_4-3-2-bash-profile" class="header-anchor">#</a> 4.3.2 ~/.bash_profile</h3> <p>在这里修改 PATH 路径
调用 ~/.bashrc</p> <h3 id="_4-3-3-bashrc"><a href="#_4-3-3-bashrc" class="header-anchor">#</a> 4.3.3 ~/.bashrc</h3> <p>在这里改别名,配置 alias
调用 /etc/bashrc</p> <h3 id="_4-3-4-etc-bashrc"><a href="#_4-3-4-etc-bashrc" class="header-anchor">#</a> 4.3.4 /etc/bashrc</h3> <p>PS1 登录提示符在这里修改
umask
PATH 变量
调用 /etc/profile.d/星.sh 文件</p> <h3 id="_4-3-5-其它配置文件"><a href="#_4-3-5-其它配置文件" class="header-anchor">#</a> 4.3.5. 其它配置文件</h3> <h3 id="_4-3-5-1-注销时生效的环境变量配置文件"><a href="#_4-3-5-1-注销时生效的环境变量配置文件" class="header-anchor">#</a> 4.3.5.1 注销时生效的环境变量配置文件</h3> <p>~/.bash_logout</p> <h3 id="_4-3-5-2-脚本历史"><a href="#_4-3-5-2-脚本历史" class="header-anchor">#</a> 4.3.5.2 脚本历史</h3> <p>当正确退出计算机的时候会历史记录会写入文件
~/.bash_history</p> <h3 id="_4-3-5-3-shell-登录信息"><a href="#_4-3-5-3-shell-登录信息" class="header-anchor">#</a> 4.3.5.3 Shell 登录信息</h3> <p>本地终端欢迎信息 /etc/issue
远程终端欢迎信息 /etc/issue.net
不管远程还是本地都可以生效 /etc/motd
参数 含义
\d 当前系统日期
\s 显示操作系统名称
\l 显示登录的终端号
\m 显示硬件体系结构，如 i386 等
\n 显示主机名
\o 显示域名
\r 显示内核版本
\t 显示当前系统时间
\u 显示当前登录用户的序列号
vi /etc/ssh/sshd_config
Banner /etc/issue.net
service sshd restart 4.正则表达式
regexper</p> <h3 id="_4-1-概念"><a href="#_4-1-概念" class="header-anchor">#</a> 4.1 概念</h3> <p>正则表达式是用于描述字符排列和匹配模式的一种语法规则
它主要用于字符串的模式分割、匹配查找及替换操作</p> <h3 id="_4-2-通配符"><a href="#_4-2-通配符" class="header-anchor">#</a> 4.2 通配符</h3> <p>通配符用来匹配符合条件的文件名，通配符是完全匹配。
ls find 这些命令不支持正则，只能使用通配符
符号 含义
? 匹配任意一个字符</p> <ul><li>匹配任意多个字符
[] 匹配中括号中范围内的一个字符
<h3 id="_4-3-正则表达式"><a href="#_4-3-正则表达式" class="header-anchor">#</a> 4.3 正则表达式</h3>
正则表达式是用来在文件中匹配符合条件的字符串，是包含匹配。
grep awk sed 等都可以支持正则表达式
<h3 id="_4-4-元字符"><a href="#_4-4-元字符" class="header-anchor">#</a> 4.4 元字符</h3>
alias grep='grep --color=auto'</li></ul> <table><thead><tr><th>元字符</th> <th>作用</th> <th>示例</th></tr></thead> <tbody><tr><td>*</td> <td>前一个字符匹配 0 次或任意多次</td> <td>grep 1* reg.txt</td></tr> <tr><td>.</td> <td>匹配除换行符外的任意一个字符</td> <td>grep . reg.txt</td></tr> <tr><td>^</td> <td>匹配行首。例如，^hello 会匹配以 hello 开头的行</td> <td>grep ^a reg.txt</td></tr> <tr><td>$</td> <td>匹配行尾。例如，hello&amp; 会匹配以 hello 结尾的行</td> <td>grep a$ reg.txt</td></tr> <tr><td>[]</td> <td>匹配屮柄号屮指定的任意一个字符，而且只匹配一个字符。例如.[aoeiu]匹配任意一个元音字母， [0-9] 匹配任意一位数字，[a-z][0-9] 匹配由小写字母和一位数字构成的两位字符</td> <td>grep ab[bc]c reg.txt</td></tr> <tr><td>[^]</td> <td>匹配除中括号中的字符以外的任意一个字符。例如，[^0-9] 匹配任意一位非数字字符，[^a-z] 匹配任意一位非小写字母</td> <td>grep a[^fg]c reg.txt</td></tr> <tr><td>\</td> <td>转义符，用于取消特殊符号的含义</td> <td>grep .$ reg.txt</td></tr> <tr><td>{n}</td> <td>表示其前面的字符恰好出现 n 次。例如，[0-9]{4} 匹配 4 位数字，[1][3-8][0-9]{9} 匹配手机号码</td> <td>grep &quot;a{1}&quot; reg.txt</td></tr> <tr><td>(n,}</td> <td>表示其前面的字符出现不少于 n 次。例如，[0-9]{2,} 匹配两位及以上的数字</td> <td>grep &quot;a{1,}&quot; reg.txt</td></tr> <tr><td>{n,m}</td> <td>表示其前面的字符至少出现 n 次，最多出现 m 次。例如，[a-z]{6,8} 匹配 6〜8 位的小写字母</td> <td>grep &quot;a{2,3}&quot; reg.txt</td></tr></tbody></table> <h3 id="_4-5-cut"><a href="#_4-5-cut" class="header-anchor">#</a> 4.5 cut</h3> <ul><li>cut 用来提取文本中的某一部分文本</li> <li>cut [选项] 文件名
<ul><li>-f 列号，用来指定要提取的列</li> <li>-d 分隔符，按照指定分隔符分割列,默认分隔符是 TAB 制表符</li></ul></li></ul> <p>提取用户名和它使用的 shell</p> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code><span class="token function">cat</span> /etc/passwd <span class="token operator">|</span> <span class="token function">cut</span> -f <span class="token number">1,7</span> -d <span class="token builtin class-name">:</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h3 id="_4-6-printf"><a href="#_4-6-printf" class="header-anchor">#</a> 4.6 printf</h3> <p><strong>按规定格式输出 <code>printf 输出类型 输出内容</code></strong></p> <table><thead><tr><th>参数</th> <th>含义</th></tr></thead> <tbody><tr><td>%ns</td> <td>输出字符串,n 是数字指代输出几个字符</td></tr> <tr><td>%ni</td> <td>输出整数,n 是指输出几个数字</td></tr> <tr><td>%m.nf</td> <td>输出浮点数,m 和 n 是数字，指代输出的整数位数和小数位数，如%6.2f 代表输出 6 位位，2 位小数，4 位整数</td></tr></tbody></table> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code><span class="token builtin class-name">printf</span> <span class="token string">&quot;%s<span class="token entity" title="\t">\t</span>%s<span class="token entity" title="\t">\t</span>%s<span class="token entity" title="\t">\t</span>%s<span class="token entity" title="\t">\t</span>%s<span class="token entity" title="\t">\t</span>\%s<span class="token entity" title="\n">\n</span>&quot;</span> <span class="token variable"><span class="token variable">$(</span><span class="token function">df</span> -h <span class="token operator">|</span> <span class="token function">grep</span> /dev/vda1<span class="token variable">)</span></span> <span class="token operator">|</span> <span class="token function">cut</span> -f <span class="token number">1,5</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h3 id="_4-6-1-df-h-显示当前的硬盘使用情况"><a href="#_4-6-1-df-h-显示当前的硬盘使用情况" class="header-anchor">#</a> 4.6.1 df -h 显示当前的硬盘使用情况</h3> <h2 id="_4-7-awk"><a href="#_4-7-awk" class="header-anchor">#</a> 4.7 awk</h2> <ul><li><p>awk '条件 1{动作 1} 条件 2{动作 2}...' 文件名</p></li> <li><p>条件(Pattern)</p> <ul><li>一般使用关系表达式作为条件</li> <li>x &gt; 10 判断变量 x 是否大于 10</li> <li>x &gt;=10 大于等于</li> <li>x &lt;=10 小于等于</li></ul></li> <li><p>动作(Action)</p> <ul><li>格式化输出</li></ul></li> <li><p>$0 整行 $1 第一列...</p></li></ul> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code><span class="token function">df</span> -h <span class="token operator">|</span> <span class="token function">grep</span> /dev/vda1 <span class="token operator">|</span><span class="token function">awk</span> <span class="token string">'{print $5}'</span><span class="token operator">|</span> <span class="token function">cut</span> -d <span class="token string">'%'</span> -f <span class="token number">1</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h3 id="_4-7-1-begin-end"><a href="#_4-7-1-begin-end" class="header-anchor">#</a> 4.7.1 begin end</h3> <ul><li>awk 可以正确截取制表符和空格</li> <li>begin 在所有的输出之前打印</li> <li>end 在所有的输出之后打印</li></ul> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code><span class="token builtin class-name">echo</span> <span class="token string">&quot;&quot;</span> <span class="token operator">&gt;</span> numbers.txt
<span class="token function">awk</span> <span class="token string">'BEGIN{print &quot;开始&quot;}END{print &quot;结束&quot;}'</span> numbers.txt
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h3 id="_4-7-2-fs"><a href="#_4-7-2-fs" class="header-anchor">#</a> 4.7.2 FS</h3> <p>Field Separator，字段分隔符</p> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code><span class="token function">awk</span> <span class="token string">'BEGIN{FS=&quot;:&quot;}{print $1&quot;\t&quot;$2}'</span> /etc/passwd
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h3 id="_4-7-3-声明变量"><a href="#_4-7-3-声明变量" class="header-anchor">#</a> 4.7.3 声明变量</h3> <p>numbers.txt</p> <div class="language-txt line-numbers-mode"><pre class="language-txt"><code>1
2
3
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><div class="language-sh line-numbers-mode"><pre class="language-sh"><code><span class="token function">awk</span> <span class="token string">'BEGIN{sum=0}{sum=sum+$1}END{print sum}'</span> numbers.txt
<span class="token number">6</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h3 id="_4-7-4-多条件"><a href="#_4-7-4-多条件" class="header-anchor">#</a> 4.7.4 多条件</h3> <p>score.txt</p> <div class="language-txt line-numbers-mode"><pre class="language-txt"><code>zhangsan 91
li 81
wangwu 71
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><div class="language-sh line-numbers-mode"><pre class="language-sh"><code><span class="token function">awk</span> <span class="token string">'$2&gt;90{print $1&quot;\t 优秀&quot;}$2&gt;80{print $2&quot;\t 良好&quot;}'</span> score.txt
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h3 id="_4-7-5-nr"><a href="#_4-7-5-nr" class="header-anchor">#</a> 4.7.5 NR</h3> <p>NR,表示 awk 开始执行程序后所读取的数据行数</p> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code><span class="token function">awk</span> <span class="token string">'{print NR,$0}'</span> score.txt
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h3 id="_4-7-6-ofs"><a href="#_4-7-6-ofs" class="header-anchor">#</a> 4.7.6 OFS</h3> <p>OFS Out of Field Separator，输出字段分隔符</p> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code><span class="token builtin class-name">echo</span> <span class="token string">&quot;i love you&quot;</span> <span class="token operator">|</span> <span class="token function">awk</span> <span class="token string">'BEGIN{ FS=&quot; &quot;;OFS=&quot;-&quot; }{print $1,$2,$3}'</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h2 id="_4-8-sed-命令"><a href="#_4-8-sed-命令" class="header-anchor">#</a> 4.8 sed 命令</h2> <p>sed 是一个轻量级编辑器，主要用来对数据进行选取、替换、替换和新增操作
sed [选项] '[动作]' 文件名
所有的动作都必须用单号号括起来
类型类似于批量 vi 操作</p> <h3 id="_4-8-1-动作"><a href="#_4-8-1-动作" class="header-anchor">#</a> 4.8.1 动作</h3> <p>参数 含义 示例
a 追加，在每一行或者指定行下面添加一行或多行 sed '1a newline' score.txt
c 行替换，用 c 后面的字符串替换掉原始整个数据行 sed 'c newline' score.txt
s 字符串替换,用一个字符串替换另外一个字符串，格式为 &quot;行范围 s/旧字符串/新字符串/g&quot; sed '3s/lisi/lisisi/g' score.txt
i 插入，在当前行插入一行或多行 sed '1i newline' score.txt
d 删除指定的行 sed '1,2d' score.txt
p 打印,输出指定的行 sed -n '2p' score.txt</p> <h3 id="_4-8-2-选项"><a href="#_4-8-2-选项" class="header-anchor">#</a> 4.8.2 选项</h3> <p>参数 含义 示例
-n 一般 sed 命令会把所有的数据都输出到屏幕上，如果加入此选项则只会把处理过的行输出到屏幕上 sed -n '2p' score.txt
-e 允许对输入数据应用多条 sed 编辑命令 sed -e 's/91/92/g;s/81/82/g' score.txt
-i 用 sed 的修改直接修改编辑的文件，而不是在屏幕上输出 sed -i '1i newline' score.txt</p> <h3 id="_4-9-排序命令-sort"><a href="#_4-9-排序命令-sort" class="header-anchor">#</a> 4.9 排序命令 sort</h3> <p>sort [选项] 文件名
选项
选项 含义
-f 忽略大小写 sort -f -t &quot;:&quot; -n -k 5,5 /etc/passwd
-n 以数值型进行排序，默认使用字符串顺序 sort -t &quot;:&quot; -n -k 3,3 /etc/passwd
-r 反向排序，默认从小到大 sort -r /etc/passwd
-t 指定分割符，默认分割符是制表符 sort -t &quot;:&quot; -k 3,3 /etc/passwd
-k n[,m] 按照指定的字段范围排序。从第 n 个字段开始，到第 m 个字段结束，默认是到行尾 sort -t &quot;:&quot; -k 3,3 /etc/passwd
sort /etc/passwd
sort -r /etc/passwd
sort -t &quot;:&quot; -k 3,3 /etc/passwd</p> <h3 id="_4-10-wc"><a href="#_4-10-wc" class="header-anchor">#</a> 4.10 wc</h3> <p>wc [选项] 文件名
选项 含义
-l 只统计行数
-w 只允许单词数
-m 只统计字符数
wc wc.txt</p> <h2 id="_5-流程控制"><a href="#_5-流程控制" class="header-anchor">#</a> 5. 流程控制</h2> <h2 id="_5-1-条件判断"><a href="#_5-1-条件判断" class="header-anchor">#</a> 5.1 条件判断</h2> <h3 id="_5-1-1-按照文件类型进行判断"><a href="#_5-1-1-按照文件类型进行判断" class="header-anchor">#</a> 5.1.1 按照文件类型进行判断</h3> <table><thead><tr><th>选项</th> <th>含义</th></tr></thead> <tbody><tr><td>-d</td> <td>文件是否存在并且是目录</td></tr> <tr><td>-e</td> <td>文件是否存在</td></tr> <tr><td>-f</td> <td>文件是否存在并且是普通文件</td></tr> <tr><td>-b</td> <td>文件是否存在并且是块设备文件</td></tr> <tr><td>-c</td> <td>文件是否存在并且是字符设备文件</td></tr> <tr><td>-L</td> <td>文件是否存在并且是链接文件</td></tr> <tr><td>-p</td> <td>文件是否存在并且是管道文件</td></tr> <tr><td>-s</td> <td>文件是否存在并且是否为非空</td></tr> <tr><td>-S</td> <td>文件是否存在并且是套接字文件</td></tr></tbody></table> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code><span class="token function">touch</span> <span class="token number">1</span>.txt
<span class="token builtin class-name">test</span> -e <span class="token number">1</span>.txt
<span class="token punctuation">[</span>-e <span class="token number">1</span>.txt<span class="token punctuation">]</span>
<span class="token builtin class-name">echo</span> <span class="token variable">$?</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>exist.sh</p> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code><span class="token punctuation">[</span> -e <span class="token number">1</span>.txt <span class="token punctuation">]</span><span class="token operator">&amp;&amp;</span><span class="token builtin class-name">echo</span> <span class="token string">&quot;yes&quot;</span><span class="token operator">||</span> <span class="token builtin class-name">echo</span> <span class="token string">&quot;no&quot;</span>
<span class="token function">yes</span>
<span class="token punctuation">[</span> -e <span class="token number">11</span>.txt <span class="token punctuation">]</span><span class="token operator">&amp;&amp;</span><span class="token builtin class-name">echo</span> <span class="token string">&quot;yes&quot;</span><span class="token operator">||</span> <span class="token builtin class-name">echo</span> <span class="token string">&quot;no&quot;</span>
no
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h3 id="_5-1-2-按照文件权限进行判断"><a href="#_5-1-2-按照文件权限进行判断" class="header-anchor">#</a> 5.1.2 按照文件权限进行判断</h3> <p>选项 含义
-r 文件是否存在，并且是否拥有读权限
-w 文件是否存在，并且是否拥有写权限
-x 文件是否存在，并且是否拥有执行权限
echo read &gt; read.txt
echo write &gt; write.txt
echo execute &gt; execute.txt</p> <p>chmod u+w write.txt
chmod u+x execute.txt</p> <p>[ -r read.txt ]&amp;&amp;echo &quot;read yes&quot;|| echo &quot;no&quot;
[ -w write.txt ]&amp;&amp;echo &quot;write yes&quot;|| echo &quot;no&quot;
[ -x execute.txt ]&amp;&amp;echo &quot;execute yes&quot;|| echo &quot;no&quot;</p> <h3 id="_5-1-3-两个文件间的比较"><a href="#_5-1-3-两个文件间的比较" class="header-anchor">#</a> 5.1.3 两个文件间的比较</h3> <p>选项 含义
文件 1 -nt 文件 2 判断文件 1 的修改时间是否比文件 2 的新
文件 1 -ot 文件 2 判断文件 1 的修改时间是否比文件 2 的旧
文件 1 -ef 文件 2 判断文件 1 和文件 2 的 inode 号是否一致,可用于判断硬链接
[ write.txt -nt read.txt ]&amp;&amp;echo &quot;write is older than read&quot;|| echo &quot;no&quot;
[ read.txt -ot write.txt ]&amp;&amp;echo &quot;read is older than write&quot;|| echo &quot;no&quot;
ln execute.txt execute2.txt
[ execute.txt -ef execute2.txt ]&amp;&amp;echo &quot;execute and execute2.txt are the same&quot;|| echo &quot;no&quot;</p> <h3 id="_5-1-4-两个整数间的比较"><a href="#_5-1-4-两个整数间的比较" class="header-anchor">#</a> 5.1.4 两个整数间的比较</h3> <p>选项 含义
整数 1 -eq 整数 2 判断整数 1 是否和整数 2 相等
整数 1 -ne 整数 2 判断整数 1 是否和整数 2 不相等
整数 1 -gt 整数 2 判断整数 1 是否大于整数 2
整数 1 -lt 整数 2 判断整数 1 是否小于整数 2
整数 1 -ge 整数 2 判断整数 1 是否大于等于整数 2
整数 1 -le 整数 2 判断整数 1 是否小于等于整数 2
[ 2 -eq 2 ]&amp;&amp;echo &quot;2==2&quot;|| echo &quot;no&quot;
[ 3 -ne 2 ]&amp;&amp;echo &quot;2!=2&quot;|| echo &quot;no&quot;
[ 3 -gt 2 ]&amp;&amp;echo &quot;2&gt;2&quot;|| echo &quot;no&quot;
[ 1 -lt 2 ]&amp;&amp;echo &quot;2&lt;2&quot;|| echo &quot;no&quot;
[ 2 -ge 2 ]&amp;&amp;echo &quot;2&gt;=2&quot;|| echo &quot;no&quot;
[ 2 -le 2 ]&amp;&amp;echo &quot;2&lt;=2&quot;|| echo &quot;no&quot;</p> <h3 id="_5-1-5-字符串的判断"><a href="#_5-1-5-字符串的判断" class="header-anchor">#</a> 5.1.5 字符串的判断</h3> <p>选项 含义
-z 字符串 判断字否串是否为空
-n 字符中 判断字符串是否为非空
字符串 1 == 字符串 2 判断字符串 1 是否和字符串 2 相等
字符串 1 != 字符串 2 判断字符串 1 是否和字符串 2 不相等
name=zhufeng
[ -z &quot;$name&quot; ]&amp;&amp;echo &quot;空&quot;|| echo &quot;非空&quot;
[ -n &quot;$name&quot; ]&amp;&amp;echo &quot;非空&quot;|| echo &quot;空&quot;
name2=zhufeng
[ &quot;$name&quot; == &quot;$name2&quot; ]&amp;&amp;echo &quot;相等&quot;|| echo &quot;不相等&quot;
[ &quot;$name&quot; != &quot;$name2&quot; ]&amp;&amp;echo &quot;不相等&quot;|| echo &quot;相等&quot;</p> <h3 id="_5-1-6-多重条件判断"><a href="#_5-1-6-多重条件判断" class="header-anchor">#</a> 5.1.6 多重条件判断</h3> <p>选项 含义
判断 1 -a 判断 2 逻辑与
判断 1 -o 判断 2 逻辑或
!判断 逻辑非
[ 2 -gt 1 -a 3 -gt 2 ]&amp;&amp;echo &quot;yes&quot;|| echo &quot;no&quot;
[ 2 -gt 1 -a 3 -gt 4 ]&amp;&amp;echo &quot;yes&quot;|| echo &quot;no&quot;
[ 2 -gt 1 -o 3 -gt 4 ]&amp;&amp;echo &quot;yes&quot;|| echo &quot;no&quot;
[ ! 3 -gt 4 ]&amp;&amp;echo &quot;yes&quot;|| echo &quot;no&quot;</p> <h2 id="_5-2-单分支-if-语句"><a href="#_5-2-单分支-if-语句" class="header-anchor">#</a> 5.2 单分支 if 语句</h2> <ul><li>if 语句使用 fi 结尾</li> <li>[条件判断式]就是使用 test 命令进行判断，所以中括号和条件判断式之间必须有空格</li> <li>then 后面跟符合条件之后执行的程序，可以放在[]之后，用;分隔，也可以换行，不用;</li></ul> <h3 id="_5-2-1-语法"><a href="#_5-2-1-语法" class="header-anchor">#</a> 5.2.1 语法</h3> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code><span class="token keyword">if</span> <span class="token punctuation">[</span>条件判断<span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token keyword">then</span>
代码体
<span class="token keyword">fi</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><div class="language-sh line-numbers-mode"><pre class="language-sh"><code><span class="token keyword">if</span> <span class="token punctuation">[</span>条件判断<span class="token punctuation">]</span>
<span class="token keyword">then</span>
代码体
<span class="token keyword">fi</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><div class="language-sh line-numbers-mode"><pre class="language-sh"><code><span class="token keyword">if</span> <span class="token punctuation">[</span> <span class="token number">2</span> -gt <span class="token number">1</span> <span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token keyword">then</span> <span class="token builtin class-name">echo</span> bigger<span class="token punctuation">;</span> <span class="token keyword">fi</span>

<span class="token keyword">if</span> <span class="token punctuation">[</span> <span class="token number">2</span> -gt <span class="token number">1</span> <span class="token punctuation">]</span>
<span class="token keyword">then</span>
  <span class="token builtin class-name">echo</span> bigger
<span class="token keyword">fi</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h3 id="_5-2-2-判断当前用户是否是-root-用户"><a href="#_5-2-2-判断当前用户是否是-root-用户" class="header-anchor">#</a> 5.2.2 判断当前用户是否是 root 用户</h3> <p>isRoot.sh</p> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code><span class="token shebang important">#!/bin/bash</span>
<span class="token assign-left variable">user</span><span class="token operator">=</span><span class="token variable"><span class="token variable">$(</span><span class="token function">whoami</span><span class="token variable">)</span></span>
<span class="token assign-left variable">user</span><span class="token operator">=</span><span class="token variable"><span class="token variable">`</span><span class="token function">whoami</span><span class="token variable">`</span></span>
<span class="token keyword">if</span> <span class="token punctuation">[</span> <span class="token string">&quot;<span class="token variable">$user</span>&quot;</span> <span class="token operator">==</span> root <span class="token punctuation">]</span>
<span class="token keyword">then</span>
  <span class="token builtin class-name">echo</span> <span class="token string">&quot;我是 root 用户&quot;</span>
<span class="token keyword">fi</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><h2 id="_5-3-双分支-if-语句"><a href="#_5-3-双分支-if-语句" class="header-anchor">#</a> 5.3 双分支 if 语句</h2> <h3 id="_5-3-1-语法"><a href="#_5-3-1-语法" class="header-anchor">#</a> 5.3.1 语法</h3> <p>if [条件判断]
then
代码体 1
else
代码体 2
fi</p> <h3 id="_5-3-2-判断是否目录"><a href="#_5-3-2-判断是否目录" class="header-anchor">#</a> 5.3.2 判断是否目录</h3> <p>isDir.sh</p> <p>#!/bin/bash
read -t 10 -p &quot;请输入一个路径&quot; dir
if [ -d &quot;$dir&quot; ]
then
echo &quot;$dir是目录&quot;
else
echo &quot;$dir 不是目录&quot;
fi</p> <h2 id="_5-4-多分支-if-语句"><a href="#_5-4-多分支-if-语句" class="header-anchor">#</a> 5.4 多分支 if 语句</h2> <h3 id="_5-4-1-语法"><a href="#_5-4-1-语法" class="header-anchor">#</a> 5.4.1 语法</h3> <p>if [条件判断 1]
then
代码体 1
elif [条件判断 2]
代码体 2
else
代码体 3
fi
grade.sh</p> <p>#!/bin/bash
read -p &quot;请输入一个分数&quot; grade
if [ &quot;$grade&quot; -gt 90 ]
then
echo 优秀
elif [ &quot;$grade&quot; -gt 80 ]
then
echo 良
else
echo 差
fi</p> <h2 id="_5-5-case-语句"><a href="#_5-5-case-语句" class="header-anchor">#</a> 5.5 case 语句</h2> <p><strong>case 和 if 都是多分支判断语句,if 能判断多个条件,case 只能判断一个条件</strong></p> <h3 id="_5-5-1-语法"><a href="#_5-5-1-语法" class="header-anchor">#</a> 5.5.1 语法</h3> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code><span class="token keyword">case</span> 变量名 <span class="token keyword">in</span>
值 <span class="token number">1</span><span class="token punctuation">)</span>
代码块 <span class="token number">1</span>
<span class="token punctuation">;</span><span class="token punctuation">;</span>
值 <span class="token number">2</span><span class="token punctuation">)</span>
代码块 <span class="token number">2</span>
<span class="token punctuation">;</span><span class="token punctuation">;</span>
<span class="token punctuation">\</span>*<span class="token punctuation">)</span>
代码块 <span class="token number">3</span>
<span class="token punctuation">;</span><span class="token punctuation">;</span>
<span class="token keyword">esac</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><p>case.sh</p> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code><span class="token shebang important">#!/bin/bash</span>
<span class="token builtin class-name">read</span> -p <span class="token string">&quot;yes or no?&quot;</span> -t <span class="token number">30</span> choose
<span class="token keyword">case</span> <span class="token variable">$choose</span> <span class="token keyword">in</span>
<span class="token string">&quot;yes&quot;</span><span class="token punctuation">)</span>
  <span class="token builtin class-name">echo</span> <span class="token string">'是'</span>
<span class="token punctuation">;</span><span class="token punctuation">;</span>
<span class="token string">&quot;no&quot;</span><span class="token punctuation">)</span>
  <span class="token builtin class-name">echo</span> <span class="token string">&quot;否&quot;</span>
<span class="token punctuation">;</span><span class="token punctuation">;</span>
<span class="token punctuation">\</span>*<span class="token punctuation">)</span>
  <span class="token builtin class-name">echo</span> 其它
<span class="token punctuation">;</span><span class="token punctuation">;</span>
<span class="token keyword">esac</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><h2 id="_5-6-for-循环"><a href="#_5-6-for-循环" class="header-anchor">#</a> 5.6 for 循环</h2> <h3 id="_5-6-1-语法"><a href="#_5-6-1-语法" class="header-anchor">#</a> 5.6.1 语法</h3> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code><span class="token keyword">for</span> 变量 <span class="token keyword">in</span> 值 <span class="token number">1</span> 值 <span class="token number">2</span> 值 <span class="token number">3</span>
<span class="token keyword">do</span>
代码块
<span class="token keyword">done</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>for.sh</p> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code><span class="token shebang important">#!/bin/bash</span>
<span class="token keyword">for</span> <span class="token for-or-select variable">i</span> <span class="token keyword">in</span> <span class="token number">1</span> <span class="token number">2</span> <span class="token number">3</span>
<span class="token keyword">do</span>
<span class="token builtin class-name">echo</span> <span class="token variable">$i</span>
<span class="token keyword">done</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h3 id="_5-6-2-语法"><a href="#_5-6-2-语法" class="header-anchor">#</a> 5.6.2 语法</h3> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code><span class="token shebang important">#!/bin/bash</span>
<span class="token keyword">for</span><span class="token variable"><span class="token punctuation">((</span>i<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">;</span>i<span class="token operator">&lt;=</span><span class="token number">10</span><span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">))</span></span><span class="token punctuation">;</span>
<span class="token keyword">do</span>
<span class="token builtin class-name">echo</span> <span class="token variable"><span class="token variable">$((</span>$i<span class="token variable">))</span></span><span class="token punctuation">;</span>
<span class="token keyword">done</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h2 id="_5-7-while-循环"><a href="#_5-7-while-循环" class="header-anchor">#</a> 5.7 while 循环</h2> <p>while 循环是不定循环，也称为条件循环，只要条件判断成立，就会一直继续
while [条件判断式]
do
代码块
done
while.sh</p> <p>#!/bin/bash
i=1
result=0
while [ $i -le 100 ]
do
result=$(($result+i))
i=$(($i+1))
done
echo $result</p> <h2 id="_5-8-until-循环"><a href="#_5-8-until-循环" class="header-anchor">#</a> 5.8 until 循环</h2> <p>直到条件不成立停止
until.sh</p> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code><span class="token shebang important">#!/bin/bash</span>
<span class="token assign-left variable">i</span><span class="token operator">=</span><span class="token number">1</span>
<span class="token assign-left variable">result</span><span class="token operator">=</span><span class="token number">0</span>
<span class="token keyword">until</span> <span class="token punctuation">[</span> <span class="token variable">$i</span> -gt <span class="token number">100</span> <span class="token punctuation">]</span>
<span class="token keyword">do</span>
<span class="token assign-left variable">result</span><span class="token operator">=</span><span class="token variable"><span class="token variable">$((</span>$result<span class="token operator">+</span>i<span class="token variable">))</span></span>
<span class="token assign-left variable">i</span><span class="token operator">=</span><span class="token variable"><span class="token variable">$((</span>$i<span class="token operator">+</span><span class="token number">1</span><span class="token variable">))</span></span>
<span class="token keyword">done</span>
<span class="token builtin class-name">echo</span> <span class="token variable">$result</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><h2 id="_6-函数"><a href="#_6-函数" class="header-anchor">#</a> 6. 函数</h2> <ul><li>linux shell 可以用户定义函数，然后在 shell 脚本中可以随便调用</li> <li>可以带 <code>function fun()</code> 定义，也可以直接 <code>fun()</code> 定义,不带任何参数</li> <li>调用函数不需要加<code>()</code></li></ul> <h3 id="_6-1-简单函数"><a href="#_6-1-简单函数" class="header-anchor">#</a> 6.1 简单函数</h3> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code><span class="token punctuation">[</span> <span class="token keyword">function</span> <span class="token punctuation">]</span> funcName <span class="token punctuation">[</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">]</span>
<span class="token punctuation">{</span>
action<span class="token punctuation">;</span>
<span class="token punctuation">[</span>return int<span class="token punctuation">;</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><div class="language-sh line-numbers-mode"><pre class="language-sh"><code><span class="token function-name function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>

<span class="token operator">&gt;</span> <span class="token builtin class-name">echo</span> start
<span class="token operator">&gt;</span> <span class="token punctuation">}</span>
  start
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><div class="language-sh line-numbers-mode"><pre class="language-sh"><code><span class="token shebang important">#!/bin/bash</span>
<span class="token function-name function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
<span class="token builtin class-name">echo</span> start
<span class="token punctuation">}</span>
start
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h2 id="_6-2-返回值"><a href="#_6-2-返回值" class="header-anchor">#</a> 6.2 返回值</h2> <p>参数返回，可以显示加：return 返回，如果不加，将以最后一条命令运行结果，作为返回值</p> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code><span class="token function-name function">sum</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
<span class="token assign-left variable">result</span><span class="token operator">=</span><span class="token variable"><span class="token variable">$((</span>$<span class="token number">1</span><span class="token operator">+</span>$<span class="token number">2</span><span class="token variable">))</span></span>
 <span class="token builtin class-name">return</span> <span class="token variable">$result</span>
<span class="token punctuation">}</span>
sum4 <span class="token number">2</span> <span class="token number">3</span>
<span class="token builtin class-name">echo</span> <span class="token variable">$?</span>
<span class="token number">5</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><h2 id="_6-3-参数说明"><a href="#_6-3-参数说明" class="header-anchor">#</a> 6.3 参数说明</h2> <table><thead><tr><th>参数处理</th> <th>说明</th></tr></thead> <tbody><tr><td>$# 传递到脚本的参数个数</td> <td></td></tr> <tr><td>$* 以一个单字符串显示所有向脚本传递的参数</td> <td></td></tr> <tr><td>$@ 与$*相同，但是使用时加引号，并在引号中返回每个参数</td> <td></td></tr> <tr><td>$$ 脚本运行的当前进程 ID 号</td> <td></td></tr> <tr><td>$? 显示最后命令的退出状态。0 表示没有错误，其他任何值表明有错误</td> <td></td></tr></tbody></table> <h2 id="_7-shell-实战"><a href="#_7-shell-实战" class="header-anchor">#</a> 7.shell 实战</h2> <h3 id="_7-1-注意事项"><a href="#_7-1-注意事项" class="header-anchor">#</a> 7.1 注意事项</h3> <ul><li>开头加解释器: #/bin/bash 和注释说明</li> <li>命名建议规则: 变量名大写、局部变量小写，函数名小写，名字体现出实际作用</li> <li>默认变量是全局的，在函数中变量 <code>local</code> 指定为局部变量，避免污染其它作用域</li> <li><code>set -e</code> 遇到执行非 <em>0</em> 时退出脚本, <code>set -x</code> 打印执行过程</li> <li>写脚本一定要先测试再上生产环境</li></ul> <h3 id="_7-2-检查主机存活状态"><a href="#_7-2-检查主机存活状态" class="header-anchor">#</a> 7.2 检查主机存活状态</h3> <p>ip.sh</p> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code><span class="token shebang important">#!/bin/bash</span>
<span class="token keyword">for</span> <span class="token for-or-select variable">IP</span> <span class="token keyword">in</span> <span class="token variable">$@</span><span class="token punctuation">;</span> <span class="token keyword">do</span>
  <span class="token keyword">if</span> <span class="token function">ping</span> -c <span class="token number">1</span> <span class="token variable">$IP</span> <span class="token operator">&amp;&gt;</span>/dev/null<span class="token punctuation">;</span> <span class="token keyword">then</span>
     <span class="token builtin class-name">echo</span> <span class="token string">&quot;<span class="token variable">$IP</span> is ok.&quot;</span>
<span class="token keyword">else</span>
  <span class="token builtin class-name">echo</span> <span class="token string">&quot;<span class="token variable">$IP</span> is wrong!&quot;</span>
<span class="token keyword">fi</span>
<span class="token keyword">done</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><div class="language-sh line-numbers-mode"><pre class="language-sh"><code><span class="token function">sh</span> ip.sh <span class="token number">127.0</span>.0.1
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/note/other/linux/auto.html" class="prev">
        文件权限
      </a></span> <span class="next"><a href="/note/other/linux/linux-install.html">
        linux-install
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/note/assets/js/app.282b5080.js" defer></script><script src="/note/assets/js/2.49b3a06c.js" defer></script><script src="/note/assets/js/35.a13dea5d.js" defer></script>
  </body>
</html>
